[platformio]
default_envs = esp32-wroom-32

[env:esp32-wroom-32]
platform = espressif32@^6.3.0
board = esp32dev
framework = arduino
monitor_speed = 115200
monitor_rts = 0
monitor_dtr = 0
upload_speed = 115200  
# Library dependencies
lib_deps = 
    bblanchon/ArduinoJson @ ^6.21.3
    tzapu/WiFiManager@^2.0.17
    # ArduinoOTA is built into ESP32 Arduino Core
# Build flags for optimization and debugging
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DARDUINO_USB_CDC_ON_BOOT=0
    -DARDUINO_USB_MODE=0
    -DSERIAL_DEBUG=1
    -DUSBCDC_ENABLED=0
    -DCONFIG_ARDUHAL_LOG_COLORS=1
    -DCONFIG_LOG_DEFAULT_LEVEL_INFO=1
    -DCONFIG_ESP32_DEFAULT_CPU_FREQ_240=1
    -DCONFIG_FREERTOS_HZ=1000
    -DCONFIG_FREERTOS_USE_TRACE_FACILITY=1
    -DCONFIG_FREERTOS_USE_STATS_FORMATTING_FUNCTIONS=1
    -DCONFIG_FREERTOS_GENERATE_RUN_TIME_STATS=1
    -DCONFIG_FREERTOS_USE_IDLE_HOOK=1
    -DCONFIG_FREERTOS_USE_TICK_HOOK=1

# Monitor filters for better debugging
monitor_filters = 
    esp32_exception_decoder
    time
